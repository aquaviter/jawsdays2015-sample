<head>
<title>Hands-on Prototype</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="d3.min.js"></script>
<script src="epoch.min.js"></script>
<script>
	$(function() {
		var socket = io.connect();

		socket.on('msg', function(message) {
			console.log(message);
			tempstr = message.split(",");
			if (tempstr.length == 3){
				devicename = tempstr[0];
				timestamp = tempstr[1];
				value = tempstr[2];
				if (data) {
					// Append Graph data
					data = [
						{ label: devicename, values: [ {time: timestamp, y: value} ] }
					];
					realtimeChart.push(data);
				} else {
					// Initialize Graph
					var data = [
						{ label: devicename, values: [ {time: timestamp, y: value} ] }
					];
					var realtimeChart = $('#realtimeChart').epoch({
						type: 'time.line',
						data: data,
						axes: ['left', 'right', 'bottom']
					});
				}
			}
			$('div').prepend(message + '<br>');
		});
	});
</script>
<link rel="stylesheet" type="text/css" href="css/epoch.min.css">
</head>
<body>
<h1>socket.io sample</h1>
<hr>
<div id="realtimeChart" style="width: 200px; height: 200px"></div>

</body>
